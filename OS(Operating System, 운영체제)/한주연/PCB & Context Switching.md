# PCB & Context Switching

## **Process Management (프로세스 관리)**

> CPU가 프로세스가 여러개일 때, CPU 스케줄링을 통해 관리하는 것을 말함

## PCB

### Process Control Block(PCB)

> 프로세스 메타데이터들을 저장해 놓는 곳, 한 PCB 안에는 한 프로세스의 정보가 담김

운영체제가 프로세스 실행을 제어하기 위해서는 프로세스의 정보를 알아야 합니다.

프로세스 제어 블록(PCB)은 운영체제가 프로세스 스케줄링을 위해 프로세스에 관한 모든 정보를 가지고 있는 데이터베이스이다.

각 프로세스가 생성될 때마다 고유의 PCB가 생성되고, 프로세스가 완료되면 PCB는 제거됩니다.

프로세스는 CPU를 점유하여 작업을 처리하다가 상태가 전이되면, CPU가 처리하던 작업의 내용들을 자신의 PCB에 저장하고, 다음에 다시 CPU를 점유하여 작업을 수행해야 할 때 PCB로부터 해당 정보들을 CPU에 넘겨와서 계속해서 하던 작업을 진행할 수 있게 됩니다. 즉, 프로세스 상태 관리와 문맥교환(Context Switching)을 위해 필요한 것입니다.

PCB에는 프로세스 식별자(Process ID) ,프로세스 상태(Process State), CPU 스케줄링 정보, 메모리 관리 정보, 프로세스에 할당된 자원들을 가리키는 포인터 등의 프로세스의 관한 정보가 들어있습니다.

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/72595875-17ac-4eff-9fe6-2603b0ea59e9/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/72595875-17ac-4eff-9fe6-2603b0ea59e9/Untitled.png)

```xml
프로그램 실행 → 프로세스 생성 → 프로세스 주소 공간에 (코드, 데이터, 스택) 생성 
→ 이 프로세스의 메타데이터들이 PCB에 저장
```

### PCB 관리 방법

Linked List 방식으로 관리된다.

PCB List Head에 PCB들이 생성될 때마다 붙게 된다. 주소값으로 연결이 이루어져 있는 연결리스트이기 때문에 삽입 삭제가 용이하다.

즉, 프로세스가 생성되면 해당 PCB가 생성되고 프로세스 완료시 제거된다.

## Context Switching

> CPU가 이전의 프로세스 상태를 PCB에 보관하고, 또 다른 프로세스의 정보를 PCB에 읽어 레지스터에 적재하는 과정

CPU에서 여러 프로세스를 돌아가면서 작업을 처리하는 데 이 과정을 Context Switching라 한다.

구체적으로, 동작 중인 프로세스가 대기를 하면서 해당 프로세스의 상태(Context)를 보관하고, 대기하고 있던 다음 순서의 프로세스가 동작하면서 이전에 보관했던 프로세스의 상태를 복구하는 작업을 말한다.

프로세스는 각각의 독립된 메모리 영역을 할당받았기 때문에 프로세스 사이에서 공유하는 메모리가 없어,

Context Switching가 발생하면 캐쉬에 있는 모든 데이터를 리셋하고 다시 캐쉬 정보를 불러와야 합니다.